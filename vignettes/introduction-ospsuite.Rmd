---
title: "Introduction to ospsuite"
output: rmarkdown::html_vignette
#output: pdf_document
vignette: >
  %\VignetteIndexEntry{Introduction to ospsuite}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

The **ospsuite** R-package is part of the [Open Systems Pharmacology](http://www.open-systems-pharmacology.org/) Software (OSPS), an open-source suite of modeling & simulation tools for pharmaceutical and other life-sciences applications. This package provides the functionality of loading, manipulating, and simulating the simulations created in the software tools PK-Sim and MoBi. This document gives an overview of the general workflow and the most important methods.

## General information
In order to load a simulation in R, it must be present in the **\*.pkml** file format. Every simulation in PK-Sim or MoBi can be exported to the *.pkml file. The examples shown in the vignettes are based on the Aciclovir example model, until stated otherwise. The model can be found in the PK-Sim examples folder of the OSPS installation.

The general workflow with the **ospsuite** package can be summarized in following steps:

  1. Loading a simulation from .pkml file.
  1. Accessing entities of the simulation, such as molecules, parameters, or containers, and reading information about them.
  1. Changing simulation settings, parameter values, and molecules start values.
  1. Retrieving the results and processing them.

The workflow steps are described in the following vignettes:

- [Loading a simulation and accessing entities](load-get.html)
* [Changing parameter and molecule start values](set-values.html)
* [Running a simulation](run-simulation.html)
* [Creating individuals](create-individual.html)
* [Population simulations](create-run-population.html)
* [Table parameters](table-parameters.html)
* [Dimensions and Units](unit-conversion.html)

Some aspects of the ospsuite package may appear uncommon for the users not familiar with the object-oriented approach. It is reccommened to read the following section to better understand some semantics and to get the most of the flexibility and efficiency of the package.

## Object-oriented approach
The **ospsuite** R-package utilizes the concept of object oriented (OO) programming based on the [R6 system](https://adv-r.hadley.nz/r6.html). While the philisophy of the package is to offer a functional programming workflow more common for the R users, it is important to understand some basic concepts of the OO programming. Most of the functions implemented in **ospsuite** return an *instance* (or an *object*) of a *class*. These objects can be used as inputs for another functions. Additionally, each object offers a set of properties (which can be another objects) and functions, accessible by the `$` sign:

```r
object1 <- ClassName$new()
aProperty <- object1$property1
resultOfAFunction <- object1$multiply(1,2)
```

Important information about the object can be printed out by calling `print(object)`.

The most important classes are:
  : `Simulation` Representation of the simulation loaded from the *.pkml file.
  : `SimulationSettings` #Short descriptions of the classes to be added here
  : `SimulationRunOptions`
  : `SolverSettings`
  : `OutputSchema`
  : `OutputSelections`
  : `SimulationResults`
  : `Container`
  : `Molecule`
  : `Parameter`
  : `IndividualCharacteristics`
  : `Population`
  : `PopulationCharacteristics`
  : `TableFormula`
